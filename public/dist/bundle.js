(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{SB:()=>I,A4:()=>L,B:()=>C});var t=document.getElementById("algo-vis"),n="editing",a=!1,r=function(e){return 255*(1.1-e)},o=function(){var e=p();E.textContent=e.toString();var t=255*(1-e),n="rgb(".concat(t,", ").concat(t,", ").concat(t,")");y.style.backgroundColor=n},i=function(e){return!(!e.classList.contains("vis-cell")||e.childElementCount>0)},l=function(e){if("confirmed"!=n){var t=e.target;if(i(t)){var a=p(),o=r(a),l="rgb(".concat(o,", ").concat(o,", ").concat(o,", ").concat(.9,")");t.style.backgroundColor=l}}},c=function(e){if("confirmed"!=n){var t=e.target;if(i(t)){var a=Number(t.dataset.passability),o=r(a),l="rgb(".concat(o,", ").concat(o,", ").concat(o,")");t.style.backgroundColor=l}}},d=function(e){if("confirmed"!=n){var t=e.target;if(i(t)){t.dataset.passability=p().toString();var a=p(),o=r(a),l="rgb(".concat(o,", ").concat(o,", ").concat(o,")");t.style.backgroundColor=l}}},s=function(){var e=h.value;b.textContent="".concat(e," x ").concat(e);var n=function(e){var n=document.createElement("table");n.id="vis-table",n.draggable=!1;for(var o=0;o<e.length;o++){var i=parseFloat(window.getComputedStyle(t).width.slice(0,-2)),s=i/e.length,u=document.createElement("tr");console.log(i),u.draggable=!1;for(var m=0;m<e[0].length;m++){var v=document.createElement("td");v.id="cell-".concat(o).concat(m),v.style.width=s.toString()+"px",v.style.height=s.toString()+"px",v.classList.add("vis-cell");var g=r(e[o][m]),f="rgb(".concat(g,", ").concat(g,", ").concat(g,")");v.style.backgroundColor=f,v.dataset.passability=e[o][m].toString(),v.draggable=!1,v.addEventListener("mouseenter",(function(e){a?d(e):l(e)})),v.addEventListener("mouseout",c),v.addEventListener("mousedown",d),v.addEventListener("dragstart",L),v.addEventListener("dragover",I),v.addEventListener("drop",C),u.appendChild(v)}n.appendChild(u)}return n}(function(e,t,n){for(var a=new Array,r=0;r<e;r++){for(var o=new Array,i=0;i<t;i++)o.push(.1);a.push(o)}return a}(parseInt(e),parseInt(e)));document.getElementById("algo-vis").innerHTML="",document.getElementById("algo-vis").appendChild(n)};document.getElementById("clear-map-btn").addEventListener("click",(function(){confirm("Are you sure you want to clear the terrain map?")&&s()}));var u=document.getElementById("confirm-map-btn");u.addEventListener("click",(function(e){e.preventDefault(),v()}));var m=document.getElementById("edit-map-btn");m.addEventListener("click",(function(e){e.preventDefault(),g()}));var v=function(){if(0!=t.childElementCount){(function(e){if(0==e.childElementCount)return null;for(var t=new Array,n=0;n<e.childElementCount;n++){for(var a=new Array,r=0;r<e.children[n].childElementCount;r++){var o=e.children[n].children[r];a.push(Number(o.dataset.passability))}t.push(a)}})(t.children[0]);n="confirmed",t.classList.remove("editable"),t.classList.add("not-editable"),u.style.display="none",m.style.display=""}},g=function(){n="editing",t.classList.remove("not-editable"),t.classList.add("editable"),u.style.display="",m.style.display="none"};document.onmousedown=function(){a=!0},document.onmouseup=function(){a=!1},document.ondragstart=function(e){},document.ondragend=function(){a=!1};var f=document.getElementById("passability-slider"),p=function(){return Number(f.value)},y=document.getElementById("passability-icon"),E=document.getElementById("passability-text-display");f.addEventListener("input",o),o(),document.getElementById("vis-settings").addEventListener("submit",(function(e){e.preventDefault()}));var h=document.getElementById("dimensions-slider");h.addEventListener("input",s);var b=document.getElementById("grid-size-counter");document.getElementById("start-icon").addEventListener("dragstart",L),document.getElementById("finish-icon").addEventListener("dragstart",L),g(),window.onload=function(){s()},console.log("test");var L=function(e){if(console.log(n),"confirmed"!=n){var t=e.target;console.log(t),t.classList.contains("vis-cell")?e.preventDefault():e.dataTransfer.setData("text/plain",t.src)}else e.preventDefault()},B=function(e){return!(e.childElementCount>0)&&null!=e.dataset.passability&&"1"!=e.dataset.passability&&null!=e.parentElement.parentElement.parentElement&&e.parentElement.parentElement.parentElement==document.getElementById("algo-vis")},I=function(e){var t=e.target;e.preventDefault(),B(t)&&(e.dataTransfer.dropEffect="copy"),e.preventDefault()},C=function(e){var t=e.target;if(B(t)){e.preventDefault(),null!=document.getElementById("start-cell")&&document.getElementById("start-cell").remove(),null!=document.getElementById("finish-cell")&&document.getElementById("finish-cell").remove();var n=e.dataTransfer.getData("text/plain"),a=document.createElement("img");a.src=n,a.style.width="80%",a.style.height="80%",a.classList.add("placed-icon");var r=document.createElement("div");r.style.height="100%",r.style.width="100%",r.classList.add("flex-center"),r.appendChild(a),r.id=a.src.includes("trophy")?"finish-cell":"start-cell",t.appendChild(r)}}})();